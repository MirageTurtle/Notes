# 安卓逆向这档事

由于环境搭建得不太顺利（主要是由于宿主机太弱），所以先暂停安卓逆向的学习，之后有了曲线救国的方案或者直接换电脑再说。如果可能的话，可以先学一些Android开发相关的，相信也有帮助。

## 碎碎念

> 创建时间：2023.07.09  更新时间：2023.07.10

很久以前我就打算跟随[这个教程](https://www.bilibili.com/video/BV1wT411N7sV)学习安卓逆向，不过正如README中提到的那样，我半途而废了，似乎只学到第二个还是第三个part。如今打算通过[Note](https://github.com/MirageTurtle/Notes)来让自己踏踏实实学一些东西，我也重新拾起安卓逆向的学习。尽管我是一个苹果用户。

另外，我没有希望自己通过这次学习变成安卓逆向方面的高手，只是希望能了解一些其中一些简单的原理，并且如果可能的话为自己带来一些便利。如果你希望自己精通这一领域，我还是建议你去学习一下安卓开发（显然我没有学过所以我学不精）。

之后如果我更加系统的学习了安卓开发及逆向相关，我可能会考虑更新一下这个文档或者自己整理一个更加系统的文档。

## 模拟器环境搭建

> 创建时间：2023.07.09  更新时间：2023.07.10

### 环境

- Macbook Air 2017
- macOS Monterey 12.6.1
- VMware Fusion Pro 12.2.4
- Android Pie (Android 9.0)

由于我的宿主机实在太弱，我找了将近两天的系统，先后尝试过Windows 11、论坛上分享的极其精简的Windows 10、Atlas OS，但都由于各种原因失败了：Windows 11直接带不动，表现为开机很慢、进去很卡、CPU占用率一直99%以上；Windows 10过于精简导致检测不到核显相关最后无法使用安卓模拟器；AtlasOS倒可以正常使用，但就是太慢了，最后在装完Magisk之后不知道为什么模拟打不开了，一直卡在94%。所以最后直接在VMware里装了个Android。

### 相关软件

- 雷电模拟器 9.0
- Magisk

#### 雷电模拟器

从官网下载安装即可。

#### Magisk

[参考链接](https://www.52pojie.cn/thread-1583586-1-1.html)

这里使用的是[魔改过的](https://huskydg.github.io/magisk-files/intro.html)，具体改了啥也不清楚，先用着好了，这里记录一些安装上要注意的点。

- 安卓9要使用debug版本
- 重启模拟器直接关掉重启，不要使用Magisk自带的重启
- 要开启Root权限
- 要开启系统磁盘写入权限
- 第一次点击安装-允许访问文件后，直接重启Magisk，然后安装
- 安装LSPosed模块前要打开zygisk

## 初识APK文件结构、双开、汉化、基础修改

> 创建时间：2023.07.10  更新时间：2023.07.10

### APK文件结构

APK全称Android Package，本质是一个压缩文件。常见文件包括：

- assets目录： 静态资源文件夹
- lib目录：`.so`动态链接库文件夹
- META-INF目录：保存应用的签名信息，签名信息可以验证APK文件的完整性
- res目录：资源文件
- AndroidMainfest.xml文件：应用清单
- classes.dex文件：java源码编译后生成的java字节码文件，是软件运行的主要逻辑
- resources.arsc文件：编译后的二进制资源文件，是一个映射表，映射资源与id